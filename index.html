<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GFS Resonance Audio Test</title>


    <script src="https://cdn.jsdelivr.net/npm/resonance-audio/build/resonance-audio.min.js"></script>

    <script>
       
	   var select = 1;
	   
		//---------- Resonance Audio

        var x = 0.0;
        var y = 0.0;
        var z = 0.0;

       
        let audioContext = new AudioContext();

        // first-order Ambisonic Resonance Audio scene 
        let resonanceAudioScene = new ResonanceAudio(audioContext);

        // Connect the scene’s binaural output to stereo out.
        resonanceAudioScene.output.connect(audioContext.destination);

		//Raum Größe und Material
        let roomDimensions = {
            width: 3.1,
            height: 2.5,
            depth: 3.4,
        };

       
			let roomMaterials = {
            
            left: 'metal',
            right: 'curtain-heavy',
            front: 'curtain-heavy',
            back: 'curtain-heavy',
            // Room floor
            down: 'grass',
            // Room ceiling
            up: 'grass',
        };

        
        resonanceAudioScene.setRoomProperties(roomDimensions, roomMaterials);
		
		var songs = ["Cat.wav","bird.wav","rain.wav"];
        //Cat     
        let audioElement = document.createElement('audio');
        audioElement.src = 'Cat.wav';
        audioElement.loop = true;
        let audioElementSource = audioContext.createMediaElementSource(audioElement);
        let source = resonanceAudioScene.createSource();
        audioElementSource.connect(source.input);
        source.setPosition(x,y,z);
        

        //  Bird		Funktioniert
        let audioElement2 = document.createElement('audio');
       // audioElement2.src = 'bird.wav';
       // audioElement2.loop = true;
        let audioElementSource2 = audioContext.createMediaElementSource(audioElement2);
        let source2 = resonanceAudioScene.createSource();
        audioElementSource2.connect(source2.input);
        source2.setPosition(x,y,z);
        


        // Rain 					Funktioniert nicht?
        let audioElement3 = document.createElement('audio');
        audioElement3.src = 'rain.wav';
        audioElement3.loop = true;
        let audioElementSource3 = audioContext.createMediaElementSource(audioElement3);
        let source3 = resonanceAudioScene.createSource();
        audioElementSource3.connect(source3.input);
        source3.setPosition(x,y,z);
        

     
     //   audioElement2.play();

	 
	 
	  //------------Audio Select
		
	 
			function selectSong(value) {		//funktioniert noch nicht
					if (value == 0) {
					select = 0;}
					else if (value == 1) {
					select = 1;}
					else {
					select = 2;}

				
			}
   
   //------------Play Button
		var onOff = 0;
		
			function playOrPauseSong() {
				
				
				
				if (onOff == 0) {
				audioElement2.src = songs[select];
				audioElement2.play();
				/*
					if (select == 0) {		//Unschön. Evtl kann man es mit nem Array kürzen
					audioElement.play();
					}
					else if (select == 1){
					audioElement1.play();
					}
					else {					// select == 2
					audioElement2.play(); 
				 }*/
				 //Pic change
				 document.getElementById("playpic").src="pause.png";
				 onOff = 1;
				}
				else {
					/*if (select == 0) {
					audioElement.pause();     
					} else if (select == 1){
					audioElement1.pause();    
					} else {*/
					audioElement2.pause();     
					/*}*/
				  
				//Pic change
				document.getElementById("playpic").src="play.png";
				onOff = 0;
				}
			}

	
			
			
    </script>
</head>
<body>

	 <!-- Playbutton	input or button -->
		 <input id="playbtn" type="button" onclick="playOrPauseSong()"  class="button"> <img id="playpic" src="play.png"/> </input> 
		 
		 
		 </br> </br> </br> </br> </br> </br> </br>
	 <!-- Selectbutton	 -->	 
		<div>
				<input class="Noisemaker" id="s0" onclick="selectSong(0)" type="button">Pick noise</button> 
		</div>
		 <div>
				<input class="Noisemaker" id="s1"  onclick="selectSong(1)" type="button">Pick noise</button> 
		</div>
		<div>
				<input class="Noisemaker" id="s2" onclick="selectSong(2)" type="button">Pick noise</button> 
		</div>


</body>
</html>